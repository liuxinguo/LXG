/*! zzy 2016-07-06 09:45:35 */
"use strict";!function(a){jQuery.extend({f2e:{util:{modData:{},jsUrl:{cookie:"http://szhuodong.duowan.com/s/gw/jquery/jquery.cookie.js",udb:"http://res.udb.duowan.com/lgn/js/oauth/udbsdk/pcweb/proxy/udb.sdk.pcweb.proxy.min.js"},getScript:function(a,b,c){var d=this;d.modData[a]?c&&c():jQuery.ajax({url:a||"",dataType:"script",cache:b}).done(function(){d.modData[a]=!0,c&&c()})},render:function(b,c,d,e){a.f2e.util.getScript("http://szhuodong.duowan.com/s/gw/jquery/artTemplate.js",!0,function(){e&&e(template);var a=template.compile(b),f=a(c||{});d&&d(f)})},getHtml:function(a,b){jQuery.ajax({type:"GET",url:a,success:function(a,c){b&&b(a)},error:function(){alert("请求失败")}})},openUrl:function(b){if(/msie/g.test(navigator.userAgent.toLowerCase()))window.open(b,"_blank");else{var c=a("<a href='"+b+"' target='_blank'>Game</a>").get(0),d=document.createEvent("MouseEvents");d.initEvent("click",!0,!0),c.dispatchEvent(d)}},isValid:function(a){return!a||a&&"object"==typeof a?!0:!1},getQueryString:function(a,b){var c=b||window.location.search,d=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),e=c.substr(1).match(d);return null!=e?unescape(e[2]):null},clip:function(a,b){var c=this;window.clipboardData?(window.clipboardData.setData("Text",a),c.showHallTip(b||"复制成功","2000")):c.showHallTip("您的浏览器不支持复制功能，请手动复制使用","2000")},showHallTip:function(b,c){var d=a.f2e.util.yy.getContext();"browser"!=d?window.external.showHallTip(b,c||"2000","1"):alert(b)},yy:{isInstallYY:function(b){a.ajax({type:"GET",dataType:"jsonp",jsonp:"callback",data:"",url:"http://local.ylogin.yy.com:6107/pt_get_list?callback=pt_get_list",async:!1,cache:!1,timeout:500,jsonpCallback:"pt_get_list",success:function(a){a[0]?b&&b(a):b&&b(null)}})},yyUrlToHTTPUrl:function(a){var b=this;if(a.indexOf("yy://")<0)return a;if(-1!=a.indexOf("yy://yxdt-")){var c=b.getTicketParam(a,"key"),d=b.getTicketParam(a,"from"),e=[c,""];if(-1!=c.indexOf("-")){var f=c.split("-");e[0]=f[0],f.shift(),e[1]=f.join("-")}return"http://sz.duowan.com/s/lobby2/actInterface.html?game="+e[0].toUpperCase()+"&server="+e[1]+"&from="+d}},getTicketParam:function(a,b){var c,d=new RegExp(b+"=([^&|\\]]*)");return(c=a.match(d))?unescape(c[1]):null},getContext:function(){var b="";return b="unknown"==typeof window.external||null==window.external?"browser":"undefined"!=typeof a.f2eWd?"browser":"undefined"!=typeof window.external.openLolBoxGame?"lolbox":"undefined"!=typeof window.external.getPlayerLoginInfo?"box":"browser"}},browser:{},dialog:{open:function(b){if(a.f2e.util.isValid(b)){var c=this,d={width:"auto",height:"auto",maxWidth:"",maxHeight:"",minWidth:"",minHeight:"",className:"",mask:!0,close:!0,title:null,content:"",button:"",fn:""},e=a.extend({},d,b||{});if(a("#dialog,#mask").remove(),1==e.mask){var f=a('<div class="mask" id="mask">');a("body").append(f)}var g=a('<div class="dialog '+e.className+'" id="dialog">'),h=a('<div class="dialog-content">');if(e.title||e.close){var i=a('<div class="dialog-header">');e.title&&i.append('<p class="dialog-title">'+e.title+"</p>").appendTo(h),e.close&&i.append('<div class="dialog-close"></div>').appendTo(h)}if(e.content){var j=a('<div class="dialog-main">');j.html(e.content).appendTo(h)}if(e.button){var k=a('<div class="dialog-bottom">');for(var l in e.button)k.append('<a class="dialog-btn">'+l+"</a>");k.appendTo(h)}g.append(h),"number"==a.type(e.width)&&g.width(e.width),"number"==a.type(e.height)&&g.height(e.height),a("body").append(g),a("#dialog").css({marginLeft:a("#dialog").width()/-2+"px",marginTop:a("#dialog").height()/-2+"px"}),e.button&&a(".dialog-bottom .dialog-btn").each(function(b,c){var d=a(this).text();a(this).live("click",e.button[d])}),a(".dialog-close").die().live("click",function(){c.close()}),e.fn&&e.fn()}},close:function(){a("#mask").fadeOut("800",function(){a(this).remove()}),a("#dialog").fadeOut("800",function(){a(this).remove()})}},udb:{init:function(b){a.f2e.util.getScript(a.f2e.util.jsUrl.udb,!0,function(){b&&b()})},islogin:function(){var a=this,b=!0,c=a.getUsername();return"undefined"==typeof c||"undefined"==c||""==c?b=!1:UDBSDKProxy.isEmptyStr(c)&&(b=!1),b},getUsername:function(){return-1!=window.location.href.indexOf("4366.com")?UDBSDKProxy.getCookieVal("4366_account")||UDBSDKProxy.getCookieVal("username"):UDBSDKProxy.getCookieVal("username")},getYYuid:function(){return UDBSDKProxy.getCookieVal("yyuid")},login:function(b){var c=a.f2e.util.yy.getContext();"browser"==c?UDBSDKProxy.openByFixProxy(b||""):"lolbox"==c?window.external.openLolBoxLoginWnd():window.external.OpenLoginWnd()},logOut:function(b){var c=a.f2e.util.yy.getContext();"browser"==c?UDBSDKProxy.deleteCookieByFixProxyWithCallBack(b||""):"lolbox"==c?a.f2e.util.showHallTip("暂不支持注销登录"):a.f2e.util.showHallTip("暂不支持注销登录")}},statpid:{statSdk:null,opts:{},init:function(b){var c=a.f2e.util.yy.getContext(),d="http://sz.duowan.com/s/ypcsdk/yystatSdk-client.js";"browser"==c&&(d="http://sz.duowan.com/s/ypcsdk/yystatSdk.js"),a.f2e.util.getScript(d,!1,function(){b&&b()})},loginStat:function(b){if(a.f2e.util.isValid(b)){var c=this,d={pro:"yygame",eid:"",eid_desc:"",rso:"",rso_desc:""};c.opts=a.extend({},d,b||{}),c.init(function(){c.statSdk=new YYStatSDK(b)})}},clickStat:function(a,b,c){var d=this;d.init(function(){d.statSdk.clickStat(a,b,c)})},gameStat:function(b,c,d,e,f){var g=this,h=a.f2e.util.yy.getContext();if("browser"==h){var i=b.replace("click/","").replace("CLICK/","").replace(/\_/g,"/"),j=c.replace("点击/","").replace(/\\_/g,"_");g.init(function(){g.statSdk.gameStat(i,encodeURIComponent(j),d,e,f)})}else if("lolbox"==h){var i=b.replace("click/","").replace("CLICK/","").replace(/\_/g,"/"),j=c.replace("点击/","").replace(/\\_/g,"_");g.init(function(){g.statSdk.gameStat(i,encodeURIComponent(j),d,e,f)})}else{var i=b.replace("click/","").replace("CLICK/","").replace(/\//g,"_");YGSDK.enterGameStat(d,e,i)}},getIp:function(a){var b=this;b.init(function(){var c=b.statSdk.getIp();a&&a(c)})}},getAjax:function(a,b,c,d){jQuery.ajax({type:"GET",dataType:"jsonp",jsonp:c,data:b||"",url:a,async:!1,cache:!1,timeout:500,success:function(a){d&&d(a)},error:function(a,b,c){},complete:function(a,b){}})}},task:{taskUrl:null,info:function(a,b){var c=this;c.getAjax("/act/info.do?",a,"callback",b)},conf:function(a,b){var c=this;c.getAjax("/act/conf.do?",a,"callback",b)},confNoLogin:function(a,b){var c=this;c.getAjax("/act/confNoLogin.do?",a,"callback",b)},testTask:function(a,b){var c=this;c.getAjax("/task/testTask.do?",a,"callback",b)},joinAndFinish:function(b,c){var d=this;if("undefined"!=typeof window.external.GetMachineId){var e=window.external.GetMachineId();!b.choosen&&e&&(b.choosen=e)}else a.f2e.util.udb.init(function(){var a=UDBSDKProxy.getCookieVal("webdtmid"),c=UDBSDKProxy.getCookieVal("webdtsg");!b.choosen&&a&&c&&(b.choosen=a+"|"+c)});d.getAjax("/task/joinAndFinish.do?",b,"callback",c)},myPackage:function(a,b){var c=this;c.getAjax("/play/myPackage.do?",a,"callback",b)},awardInfo:function(a,b){var c=this;c.getAjax("/play/awardInfo.do?",a,"callback",b)},getRoles:function(a,b){var c=this;c.getAjax("/act/getRoles.do?",a,"callback",b)},pointInfo:function(a,b){var c=this;c.getAjax("/play/pointInfo.do?",a,"callback",b)},mydj:function(a,b){var c=this;c.getAjax("/play/mydj.do?",a,"callback",b)},signHistory:function(a,b){var c=this;c.getAjax("/play/signHistory.do?",a,"callback",b)},orderAddress:function(a,b){var c=this;c.getAjax("/play/orderAddress.do?",a,"callback",b)},dynamics:function(a,b){var c=this;c.getAjax("/play/dynamics.do?",a,"callback",b)},showAwardInfo:function(a,b){var c=this;c.getAjax("/play/showAwardInfo.do?",a,"callback",b)},accountinfo:function(a){var b=this;b.getAjax("/act/accountinfo.do?","","callback",a)},servertime:function(a){var b=this;b.getAjax("/act/servertime.do?","","callback",a)},externalInfo:function(b){a.f2e.util.getAjax("http://egg.game.yy.com/user/externalInfo.do?","","callback",b)},superbeanInfo:function(b){a.f2e.util.getAjax("http://egg.game.yy.com/user/superbeanInfo.do?","","callback",b)},getAjax:function(b,c,d,e){var f=this,g=window.location.href;-1!=g.indexOf("yy.com")?f.taskUrl="http://task3.game.yy.com":-1!=g.indexOf("4366.com")?f.taskUrl="http://task3.4366.com":f.taskUrl="http://task3.game.duowan.com",a.f2e.util.getAjax(f.taskUrl+b,c,d,e)}}}})}(window.jQuery);