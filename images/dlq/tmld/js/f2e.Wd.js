/*! zzy 2016-06-03 09:52:28 */
"use strict";!function(a){jQuery.extend({f2eWd:{gameUrl:"http://udblogin.duowan.com/login.do?",is4366:!1,serverType:"",init:function(b){var c=this,d={game:null,gameName:null,serverType:{yy:"GENERAL",4366:"GENERAL,ST4366"},homePage:!1,advertId:1e4,online:"online",serText:"",ext:{need:!0,fac:"&online&report_ver=new&showtools=0&from=pc&webyygame&"},url:{xf:"",lgn:"",center:""},serNum:{recSer:1,newSer:2},statpid:{pro:"webyygame",eid:"LYYW/NORMMICRO/other",eid_desc:"联运业务/常规微端/其他游戏",rso:"FROM_LYYW/NORMMICRO",rso_desc:"联运业务/常规微端"}};c.opts=a.extend(!0,{},d,b||{}),c.initDomain(),c.islogin(),c.bindEvent()},initDomain:function(){var b=this,c=window.location.href;-1!=c.indexOf("4366.com")?(b.serverType=b.opts.serverType[4366],b.is4366=!0,b.gameUrl="http://www.4366.com/s/sdk/login.html?",a.f2e_wd_4366.init(b.opts)):b.serverType=b.opts.serverType.yy},islogin:function(){var b=this;a.f2e.util.udb.init(function(){var c=a.f2e.util.udb.islogin();b.username=a.f2e.util.udb.getUsername(),a(".wd-user").html(b.username),c&&b.requestSer(),b.statpid(),b.initPages()})},statpid:function(){var b=this,c={pro:b.opts.statpid.pro,eid:"login/"+b.opts.statpid.eid+"/GETIN",eid_desc:"登录/"+b.opts.statpid.eid_desc+"/页面入口",rso:b.opts.statpid.rso,rso_desc:b.opts.statpid.rso_desc};a.f2e.util.statpid.loginStat(c)},initPages:function(){var b=this;b.is4366?(a(".gw-pay").attr({href:"http://gpay.4366.com/",target:"_blank"}),a(".gw-kf").attr({href:"http://kf.4366.com/",target:"_blank"}),a(".gw-vip-kf").attr({href:"https://gamevip.4366.com/user/index.do",target:"_blank"})):(a(".gw-pay").attr({href:"https://gpay.duowan.com/deposit/index.do?type=game&gameId="+b.opts.game+"&user="+b.username,target:"_blank"}),a(".gw-kf").attr({href:"http://gm.duowan.com/user/center/centerOpen.do?source=YY&product="+b.opts.game,target:"_blank"}),a(".gw-vip-kf").attr({href:"https://gamevip.duowan.com/user/index.do",target:"_blank"}))},requestSer:function(){var b=this;a.getScript("http://udblogin.duowan.com/ext/gslist.do?javascript&weight=0&serverType="+b.serverType+"&"+b.opts.online+"&game="+b.opts.game,function(){var c=document.dwGameServerList||null;if(c&&c[b.opts.game]){var d="";a.each(c[b.opts.game].servers,function(a,c){if(0!=c.weight){var e='<a class="serverItem sItem wd-enterGame wd-statpid" serId="'+c.id+'" s_data="click/'+b.opts.statpid.eid+"/QBFWQ/"+c.id+"|点击/"+b.opts.statpid.eid_desc+"/全部服务器/"+c.id+'"><i class="sIcon"></i><span class="sText">'+c.name+'</span><span class="sDesc">'+b.opts.serText+"</span></a>";d=e+d}}),a(".wd-serlist").html(d);var e=b.newser();a(".wd-newser").html(e),b.requestRec()}else a(".wd-recser").html("<p>暂无区服</p>")})},requestRec:function(){var b=this,c="http://userdata.udblogin.duowan.com";b.is4366&&(c="http://userdata.udblogin.4366.com"),a.getScript(c+"/ext/recently.do?javascript&serverType="+b.serverType+"&"+b.opts.online+"&game="+b.opts.game,function(){var c=document.dwRecentlyLoginServerList||null;if(c&&"SUCCESS"==c.msg){for(var d="",e=0;e<b.opts.serNum.recSer;e++){var f=c.recentlyLoginServers[e];d+='<a class="serverItem sItem wd-enterGame wd-statpid" serid="'+f.serverId+'" s_data="click/'+b.opts.statpid.eid+"/ZJDL/"+f.serverId+"|点击/"+b.opts.statpid.eid_desc+"/最近登录/"+f.serverId+'"><i class="sIcon"></i><span class="sText">'+f.serverName+'</span><span class="sDesc">'+b.opts.serText+"</span></a>"}a(".wd-recser").html(d)}else{var g=b.newser();a(".wd-recser").html(g)}})},newser:function(){for(var b=this,c="",d=a(".wd-serlist a"),e=0;e<b.opts.serNum.newSer;e++)c+=d.eq(e).outerHTML();return c},login:function(){var b=this,c="http://"+window.location.host+"/"+b.opts.url.xf+"?"+location.search.substring(1);b.is4366?a.f2e_wd_4366.showReg(c):a.f2e.util.udb.login(c)},logout:function(){var b=this,c="http://"+window.location.host+"/"+b.opts.url.lgn+"?"+location.search.substring(1);b.is4366?a.f2e_wd_4366.logout(c):a.f2e.util.udb.logOut(c)},bindEvent:function(){var b=this;a(".wd-enterGame").live("click",function(){var c=a(this).attr("serId"),d=a(this).attr("s_data");if(c&&d){var e=d.split("|"),f=UDBSDKProxy.getCookieVal("username"),g="";b.opts.ext.need&&(g=b.is4366?"&pro=adcenter2&rso=FROM_SCTG&rso_desc=FROM_SCTG&ref=SCTG/4366WD/"+b.opts.game+"/JRYX &ref_desc=市场推广/4366微端/"+b.opts.gameName+"/进入游戏":"&pro="+b.opts.statpid.pro+"&rso="+b.opts.statpid.rso+"&rso_desc="+b.opts.statpid.rso_desc+"&ref="+e[0].replace("click/","")+"&ref_desc="+e[1].replace("点击/",""));var h=b.gameUrl+"&game="+b.opts.game+"&server="+c+b.opts.ext.fac+g;f?"function"==typeof window.enterGame?window.enterGame(h):window.location.href=h:a.f2e_wd_4366.loginRedirectUrl(h)}}),a(".wd-rec-game").live("click",function(){a(".wd-recser a:first").trigger("click")}),a(".wd-logout").live("click",function(){b.logout()}),a(".wd-lgn").live("click",function(){b.login()}),a(".wd-center").live("click",function(){var c=b.opts.url.center;a.f2e.util.udb.login(c)}),a(".wd-statpid").live("click",function(){var b=a(this).attr("s_data");b&&(b=b.split("|"),a.f2e.util.statpid.clickStat(b[0],b[1]))})}}}),jQuery.fn.outerHTML=function(b){return b?this.before(b).remove():a("<Hill_man>").append(this.eq(0).clone()).html()}}(window.jQuery);;/*! zzy 2016-06-03 09:52:28 */
!function(a){jQuery.extend({f2e_wd_4366:{init:function(b){var c=this;c.opts=b,a.f2e_wd_statpid.init(c.opts,function(){c.initScript(),c.updateLink(),c.bindEvent()})},initScript:function(){a.f2e.util.getScript("http://www.4366.com/s/sdk/jquery.u4366sdk.1.0.js","true",function(){})},updateLink:function(){var b=window.location.host.split(".")[0].toLowerCase();a("body").find("a[href*='"+b+".yy.com'],a[href*='"+b+".duowan.com']").each(function(){var c=a(this).attr("href");c=c.replace(b+".yy.com",b+".4366.com"),c=c.replace(b+".duowan.com",b+".4366.com"),a(this).attr("href",c)})},showLogin:function(b){var c=a.f2e_wd_statpid.busiurl("lgn",b),d={type:2,style:3,url:c};U4366SDK.showLogin(d)},showReg:function(a){var b=this,c={type:2,style:3,url:a,loginUrl:"http://"+window.location.host+"/"+b.opts.url.xf};U4366SDK.showReg(c)},logout:function(a){U4366SDK.logout(a)},loginRedirectUrl:function(b){var c=a.f2e_wd_statpid.busiurl("reg",b);U4366SDK.loginRedirectUrl(c,!0,function(a){"function"==typeof window.enterGame?window.enterGame(a):window.location.href=a})},bindEvent:function(){}}})}(jQuery);;/*! zzy 2016-06-03 09:52:28 */
!function(a){jQuery.extend({f2e_wd_statpid:{reqUrl:"http://download.game.yy.com/adcenter2/",ext:"pro=adcenter2&dest=new&",advertId:0,init:function(a,b){var c=this;c.opts=a,c.initAdvert(b),c.bindEvent()},initAdvert:function(b){var c=this,d=a.f2e.util.getQueryString("dsfrom")||c.opts.advertId,e=c.reqUrl+"conf/"+d+".js";a.f2e.util.getScript(e,!0,function(){var d="0.0.0.0";a.f2e.util.getScript("http://bdty.yy.com/ip.js",!0,function(){remoteAddr&&(d=remoteAddr),c.ext+="advertId="+Adcenter.advertId+"&gameId="+Adcenter.gameId+"&serverId="+Adcenter.serverId+"&flashId="+Adcenter.flashId+"&userIp="+d+"&baiduKwid=1&";var a=window.location.href.split("?");a&&a[1]&&(c.ext+=a[1]),c.stat_login(),b&&b()})})},busiurl:function(a,b){var c=this,d=c.stat_regSuc(b);"lgn"==a&&(d=c.stat_logSuc(b));var e="http://f2e.duowan.com/s/lib/sdk/statpid/statpid.html?"+d;return-1!=window.location.href.indexOf("4366.com")&&(e="http://f2e.4366.com/s/lib/sdk/statpid/statpid.html?"+d),e},stat_login:function(){var b=this,c={eid:"pmt_view",eid_desc:"游戏推广页页面打开事件",ext:b.ext};a.f2e.util.statpid.loginStat(c),a.f2e.util.statpid.clickStat("log_suc","log_suc",b.ext)},stat_click:function(){var b=this,c="pmt_click",d="游戏推广页页面点击事件",e=b.ext+"&coordinateX=0&coordinateY=0";a.f2e.util.statpid.clickStat(c,d,e)},stat_regSuc:function(a){var b=this,c="reg_suc",d="reg_suc",e="eid="+c+"&eid_desc="+d+"&"+b.ext;return e+=a?"&busiurl="+encodeURIComponent(a):"&busiurl="+encodeURIComponent(window.location.href)},stat_logSuc:function(a){var b=this,c="log_suc",d="log_suc",e="eid="+c+"&eid_desc="+d+"&"+b.ext;return e+=a?"&busiurl="+encodeURIComponent(a):"&busiurl="+encodeURIComponent(window.location.href)},bindEvent:function(){var b=this,c=!0;a("body *").one("click",function(a){c&&(setTimeout(function(){b.stat_click()},2e3),c=!1)})}}})}(jQuery);